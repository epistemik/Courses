<!DOCTYPE HTML SYSTEM "html.dtd">
<!-- bgcolor=#004570 -->
<HTML><HEAD><TITLE>MIDTERM A</TITLE></HEAD>
<BODY bgcolor=#FFFFFD text=black link=blue vlink=red alink=green><H2>Question #1</H2>Write down the output of the following program segment. Getting the
first, second and third output lines correct are worth 6, 7 and 7 marks
respectively. You may use the next page as well.
<b>Hint:</b> <i>to receive partial marks, in case
you get the output wrong, you probably want to indicate what the four
pointers are pointing to after each line.</i>
<PRE>
   int a = 1, b = 2, c = 3,
       *p1, *p2,
       **pp1, **pp2;

    p1 = &b;
    p2 = &c;
    pp1 = &p1;
    pp2 = &p2;

    if (**pp2 == *p1 + a) {
       cout << "TRUE" << endl;
    } else {
       cout << "FALSE" << endl;
    }

    **pp1 = *p2 + c;
    *pp2 = p1;
    *p2 = *p1 + a;

    cout << "FIRST: " << a << ' ' << b << ' ' << c << endl;

    *pp1 = &a;
    p1 = *pp1;
    **pp2 = **pp1 + *p1;


    cout << "SECOND: " << a << ' ' << b << ' ' << c << endl;
</PRE><br><br><br><H3>Question #2</H3><CENTER> <H4>Dynamic Memory Allocation & Arrays</H4>

   <IMG SRC="a_q2.gif" WIDTH=80%>
</CENTER>The diagram above is the layout of a two dimensional structure.
The symbolic identifier <tt>a</tt> of type <tt>int**</tt> has the
address <tt>0x1002</tt>. All pointers are 32 bit and the integers
are 16 bit long. Answer the 3 questions below, starting on
the next page.
<br><br>
Given the variable declaration
<PRE>
   int ** a; 

</PRE>

write a short code segment (<i> no need for functions, loops or
program, only the relevant lines</i>), which allocates the very same
structure as on the previous page. <b>You do not have to initialize
the array elements to the values on the diagram!</b>
The addresses indicate how the structure is allocated, and of course,
you may assume that the addresses returned by the <tt>new</tt> or
<tt>new[]</tt> operators in the sequence you call them are the same as on
the diagram.<b> Hint:</b> <i> you do not need more than 4 lines.</i>
<br>
Write a short code segment which deallocates the structure. <b>Hint:</b>
<i> you can do it in three lines.</i>

<br><br>
Assuming that the addresses and values are exactly as they are on the
diagram, and after executing the following few lines of code
<PRE>
   a[0][2] = 7;<br>
   a[1][1] = -6;<br>
</PRE>
write down the values of the following expressions:
<PRE>a[1] = <br>a[2][2] =  <br>**a = <br>a = <br></PRE><H2>Question #3</H2>The following three short program segments each have <i>at least</i> one
problem. You are to find <b>one</b> in each and give a sentence or
so explanation describing what exactly the problem is. <b>Hint:</b>
<i> there are no syntax errors!</i>
<br><br>
Find an error, and describe it.
<PRE>
void foo(double* ptr,double v) {  if (ptr == (double*)0) {
       ptr = new double;    }
    *ptr = 2*v;
}

double x, *y = (double*)0;
foo(y,x);


</PRE>Find an error, and describe it.
<PRE>
int* foo(int *a, int *b) {
   int c = *a + *b,
       d = *a - *b;
   a = c > d ? &c : &d;  <br> return a;
}
</PRE>Find an error, and describe it.
<PRE>
int x;  int& func(bool b) {
   if (b) x++;
   else x--;
   return x; } <br>int* foo(int& (*f) (bool), bool v) {
   int x = f(v);   return &x; 
   }

int main() {
   *(foo(func,5>2)) = 7; 
   return 0;
}
</PRE>

<H2>Question #4</H2>Consider the following class definition, method and function implementations :
<PRE>
class C {
  public:
    C();
    C(int);
    C(const C&);
    C& operator=(const C&);
    ~C();
};

C foo(C c) {
  return c;
}

C::C() { cout << "C::C()" << endl; }

C::C(int) { cout << "C::C(int)" << endl; }

C::C(const C&) { cout << "C::C(const C&)" << endl; }

C& C::operator=(const C&) { cout << "C::operator=" << endl; return *this; }

C::~C() { cout << "C::~C()" << endl; }

</PRE>Answer the question posed on the following page.
<br><br>
Give the output of the following short code segment, and <b>explain briefly
but clearly</b> what caused each line to be printed! <b>Hint:</b> <i>the two lines are in a local scope!</i>
<PRE>...{
  C c[2];

  c[1] = 34;
}
...
</PRE><H2>Question #5</H2>Write a <b>program</b> with one function. The function takes an integer
array and its length, and reverses the order of the elements. Call this
function <b>once</b> in <tt>main</tt> to perform this task on an array that
you declared and initialized.</BODY></HTML>