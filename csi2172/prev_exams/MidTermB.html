<!DOCTYPE HTML SYSTEM "html.dtd">
<!-- bgcolor=#004570 -->
<HTML><HEAD><TITLE>MIDTERM B</TITLE></HEAD>
<BODY  bgcolor=#FFFFFD    text=black link=blue vlink=red alink=green><H3>Question #1</H3>Write down the output of the following program segment. Getting the
first, second and third output lines correct are worth 6, 7 and 7 marks
respectively. You may use the next page as well.
<b>Hint:</b> <i>to receive partial marks, in case
you get the output wrong, you probably want to indicate what the four
pointers are pointing to after each line.</i>
<PRE>
    int a = 1, b = 2, c = 3,
       *p1, *p2,
       **pp1, **pp2;

    p1 = &c;
    p2 = &a;
    pp1 = &p2;
    pp2 = &p1;

    if (**pp2 == *p1 + a) {
       cout << "TRUE" << endl;
    } else {
       cout << "FALSE" << endl;
    }

    **pp1 = **pp2 - a;
    *pp1 = p2;
    *p1 = *p2 + a;

    cout << "FIRST: " << a << ' ' << b << ' ' << c << endl;

    *pp2 = &b;
    p1 = *pp1;
    **pp1 = **pp2 - *p1;


    cout << "SECOND: " << a << ' ' << b << ' ' << c << endl;
</PRE>
   <br><H3>Question #2</H3><H4>Dynamic Memory Allocation & Arrays</H4>Write a function with prototype <tt>int** alloc(int n, int m)</tt>,
which allocates a <i>2n * m</i> matrix, which has the property
that the value <tt>a[i][j] == a[i+n][j]</tt>, or in other words,
the <i>i</i> <sup>th</sup> and <i>(i+n)</i> <sup>th</sup> rows are identical.
Moreover, this property is intrinsically imposed by the structure.
For example, for <i>n=2</i> and <i>m=3</i>, a <i>4 * 3</i> structure is created
<PRE>
int **a = alloc(2,3);
a[0][0] =  1; a[2][1] =  2; a[2][2] =  3;
a[1][0] = -1; a[3][1] = -2; a[1][2] = -3;
// a[0][0] ==  1  a[0][1] ==  2  a[0][2] ==  3
// a[1][0] == -1  a[1][1] == -2  a[1][2] == -3
// a[2][0] ==  1  a[2][1] ==  2  a[2][2] ==  3
// a[3][0] == -1  a[3][1] == -2  a[3][2] == -3
</PRE>
You may assume that neither <i>n</i> nor <i>m</i> are 0.
<br><b>Hint:</b> <i>start with part 3, you do not even need 10 lines</i>.<br><br>Write a function with prototype <tt>void dealloc(int** a, int n)</tt>,
which deallocates the <tt>2n * m</tt> (<i>m</i> irrelevant}) structure passed
in <tt>a</tt> and allocated by <tt>alloc</tt>. You may assume that
neither <i>m</i> nor <i>n</i> are 0.
<b> <br>Hint:</b> <i>start with part 3, you do not even need 10 lines</i>.Draw a diagram which shows how such a <i>4 * 3</i>
structure with <i>n = 2</i> and <i>m = 3</i> is arranged in memory. You
may assume any pointer and integer size and make up addresses,
but do indicate what addresses are stored in the pointers.<br><br><br><br><H3>Question #3</H3><H4> Logical errors.</H4>Would the following function swap the values of <tt>x</tt> and
<tt>y</tt>? Explain!
<PRE>
void swap(int *a, int *b) {
   int *c = a;
   a = b;
   b = c;
}

int x,y;

swap(&x,&y);
</PRE><br><br>Find <b>one</b> error in the following program segment, and
describe what it is. <b>Hint:</b> <i>there are no syntax errors!</i>
<PRE>
int* f() {
  int *a = new int;
  *a = 5;
return a; }
  int& foo1(int* (*func)()) {
  return *(func());}

int& foo2() {
  int x = foo1(f);
    return x;}<br>...cout << foo2() << endl; ...</PRE><br><br><H3>Question #4</H3>Consider the following class definition, method and function implementations :
<PRE>
class C {
  public:
    C();
    C(int);
    C(const C&);
    C& operator=(const C&);
    ~C();
};

C foo(C c) {
  return c;
}

C::C() { cout << "C::C()" << endl; }

C::C(int) { cout << "C::C(int)" << endl; }

C::C(const C&) { cout << "C::C(const C&)" << endl; }

C& C::operator=(const C&) { cout << "C::operator=" << endl; return *this; }

C::~C() { cout << "C::~C()" << endl; }

</PRE>

Answer the question posed on the following page.
<br><br>
Give the output of the following short code segment, and <b>explain briefly
but clearly</b> what caused each line to be printed! <b>Hint</b>: <i>the two
lines are in a local scope!</i><PRE>...
 {
  C c1(5),c2;

  c1 = foo(c2);
 }
...
</PRE><br><br><H3>Question #5</H3>Write a <b>program</b> with one function. The function takes an integer
array and its length and it returns an integer. The value returned is
the smallest positive value in the array, or 0 if all values are negative
or if the length of the array is 0. Call this function in <tt>main</tt>
with an array that you declared and initialized to perform this task.</BODY></HTML>
